name: Setup Docker and Run 9hits

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: windows-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Install Docker using Docker Setup Action
      uses: docker/setup-buildx-action@v2
      with:
        version: latest

    - name: Pull Docker Image 9hitste/app
      run: |
        # Загружаем образ с Docker Hub
        docker pull 9hitste/app
        Write-Output "Docker image 9hitste/app pulled."

    - name: Run 9hits Docker Container
      run: |
        # Запускаем контейнер с нужными параметрами, используя --network=bridge
        docker run -d --network=bridge --name=9hits 9hitste/app /nh.sh --token=dcd7ea6c4acdf7a3d50d78a50ee329a1 --system-session --allow-crypto=no
        Write-Output "Docker container 9hits started."

    - name: Verify Docker Container Running
      run: |
        # Проверяем, что контейнер работает
        docker ps
        Write-Output "Docker container is running."









